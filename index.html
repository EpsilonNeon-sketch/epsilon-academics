<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Epsilon Academics - Learning Tools for Students</title>
    <link rel="icon" href="./icon.png">
    <link rel="manifest" href="./manifest.json">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-green: #2e7d32;
            --light-green: #4caf50;
            --pale-green: #e8f5e9;
            --dark-green: #1b5e20;
            --white: #ffffff;
            --light-gray: #f5f5f5;
            --medium-gray: #e0e0e0;
            --dark-gray: #424242;
            --text-color: #212121;
            --sidebar-width: 250px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-gray);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
        }

        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--primary-green);
            color: var(--white);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: transform 0.3s ease;
            z-index: 1000;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        }

        .sidebar-header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .nav-menu {
            list-style: none;
            padding: 20px 0;
        }

        .nav-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
        }

        .nav-item:hover {
            background-color: var(--dark-green);
        }

        .nav-item.active {
            background-color: var(--dark-green);
            border-left: 4px solid var(--white);
        }

        .nav-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            padding: 20px;
            transition: margin-left 0.3s ease;
        }

        .content-section {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .section-header h2 {
            color: var(--primary-green);
            margin-bottom: 10px;
        }

        .card {
            background-color: var(--white);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        /* Homepage Styles */
        .hero {
            background: linear-gradient(135deg, var(--light-green), var(--primary-green));
            color: var(--white);
            padding: 40px;
            border-radius: 8px;
            margin-bottom: 30px;
            text-align: center;
        }

        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 20px;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            background-color: var(--white);
            border-radius: 8px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }

        .feature-card i {
            font-size: 2.5rem;
            color: var(--light-green);
            margin-bottom: 15px;
        }

        .feature-card h3 {
            color: var(--primary-green);
            margin-bottom: 10px;
        }

        /* Calculator and Converter Styles */
        .tool-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .tool-section {
            background-color: var(--white);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .tool-section h3 {
            color: var(--primary-green);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--pale-green);
        }

        .calc-display {
            background-color: var(--pale-green);
            padding: 15px;
            border-radius: 5px;
            text-align: right;
            font-size: 1.5rem;
            margin-bottom: 15px;
            min-height: 50px;
        }

        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .calc-btn {
            padding: 15px;
            background-color: var(--light-green);
            color: var(--white);
            border: none;
            border-radius: 5px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .calc-btn:hover {
            background-color: var(--primary-green);
        }

        .calc-btn.operator {
            background-color: var(--primary-green);
        }

        .calc-btn.clear {
            background-color: var(--dark-green);
        }

        .converter-group {
            margin-bottom: 15px;
        }

        .converter-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--dark-gray);
        }

        .converter-group select, .converter-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--medium-gray);
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .btn {
            background-color: var(--light-green);
            color: var(--white);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
            font-size: 1rem;
        }

        .btn:hover {
            background-color: var(--primary-green);
        }

        /* Translator Styles */
        .translator-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .language-selector {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .language-selector select {
            padding: 10px;
            border: 1px solid var(--medium-gray);
            border-radius: 5px;
            flex: 1;
        }

        .translate-btn {
            background-color: var(--light-green);
            color: var(--white);
            border: none;
            padding: 10px 20px;
            border-radius: 50%;
            cursor: pointer;
            margin: 0 10px;
            transition: background-color 0.2s;
            align-self: center;
        }

        .translate-btn:hover {
            background-color: var(--primary-green);
        }

        .text-area {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 1px solid var(--medium-gray);
            border-radius: 5px;
            resize: vertical;
        }

        /* Work Manager Styles */
        .work-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group.full-width {
            grid-column: span 2;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--dark-gray);
            font-weight: 500;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--medium-gray);
            border-radius: 5px;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .work-list {
            margin-top: 20px;
        }

        .work-item {
            background-color: var(--pale-green);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s;
        }

        .work-item:hover {
            transform: translateX(5px);
        }

        .work-item-content {
            flex: 1;
        }

        .work-item-title {
            font-weight: bold;
            color: var(--primary-green);
            margin-bottom: 5px;
        }

        .work-item-details {
            font-size: 0.9rem;
            color: var(--dark-gray);
        }

        .work-item-deadline {
            background-color: var(--light-green);
            color: var(--white);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 10px;
        }

        .delete-btn {
            background-color: #f44336;
            color: var(--white);
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
        }

        /* Grade Planner Styles */
        .grade-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .grade-item {
            background-color: var(--pale-green);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .grade-item-subject {
            font-weight: bold;
            color: var(--primary-green);
        }

        .grade-item-score {
            font-size: 1.2rem;
            color: var(--dark-green);
        }

        .chart-container {
            background-color: var(--white);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        .learning-list {
            margin-top: 20px;
        }

        .learning-item {
            background-color: var(--white);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .learning-item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .learning-item-title {
            font-weight: bold;
            color: var(--primary-green);
        }

        .difficulty-badge {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            color: var(--white);
        }

        .difficulty-easy {
            background-color: #4caf50;
        }

        .difficulty-medium {
            background-color: #ff9800;
        }

        .difficulty-hard {
            background-color: #f44336;
        }

        /* Mobile Responsive */
        .menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background-color: var(--primary-green);
            color: var(--white);
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }

            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .tool-container,
            .translator-container,
            .work-form,
            .grade-form {
                grid-template-columns: 1fr;
            }

            .form-group.full-width {
                grid-column: span 1;
            }

            .hero h2 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h1>Epsilon Academics</h1>
            <p>Learning Tools for Grades 7-9</p>
        </div>
        <ul class="nav-menu">
            <li class="nav-item active" data-section="home">
                <i class="fas fa-home"></i> Home
            </li>
            <li class="nav-item" data-section="calculator">
                <i class="fas fa-calculator"></i> Calculator & Converter
            </li>
            <li class="nav-item" data-section="translator">
                <i class="fas fa-language"></i> Translator
            </li>
            <li class="nav-item" data-section="work-manager">
                <i class="fas fa-tasks"></i> Work Manager
            </li>
            <li class="nav-item" data-section="grade-planner">
                <i class="fas fa-chart-line"></i> Grade Planner
            </li>
        </ul>
    </aside>

    <!-- Mobile Menu Toggle -->
    <button class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Home Section -->
        <section class="content-section active" id="home">
            <div class="hero">
                <img src="./icon.png" width="200px" height="200px">
                <h2>Welcome to Epsilon Academics</h2>
                <h2>BY warren adrain</h2>
                <p>Your comprehensive learning toolkit designed specifically for students in grades 7-9. Explore our collection of tools to enhance your learning experience.</p>
            </div>

            <div class="features">
                <div class="feature-card">
                    <i class="fas fa-calculator"></i>
                    <h3>Calculator & Converter</h3>
                    <p>Solve math problems quickly and convert between different units of measurement.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-language"></i>
                    <h3>Translator</h3>
                    <p>Translate text between different languages to support your language learning.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-tasks"></i>
                    <h3>Work Manager</h3>
                    <p>Keep track of your assignments, projects, and deadlines in one organized place.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-chart-line"></i>
                    <h3>Grade Planner</h3>
                    <p>Monitor your academic progress and track what you've learned in each subject.</p>
                </div>
            </div>
        </section>

        <!-- Calculator & Converter Section -->
        <section class="content-section" id="calculator">
            <div class="section-header">
                <h2>Calculator & Converter</h2>
                <p>Use our calculator for quick math problems and convert between different units.</p>
            </div>

            <div class="tool-container">
                <div class="tool-section">
                    <h3>Calculator</h3>
                    <div class="calc-display" id="calcDisplay">0</div>
                    <div class="calc-buttons">
                        <button class="calc-btn clear" onclick="clearCalc()">C</button>
                        <button class="calc-btn operator" onclick="appendToCalc('/')">/</button>
                        <button class="calc-btn operator" onclick="appendToCalc('*')">×</button>
                        <button class="calc-btn operator" onclick="deleteLastCalc()">←</button>
                        
                        <button class="calc-btn" onclick="appendToCalc('7')">7</button>
                        <button class="calc-btn" onclick="appendToCalc('8')">8</button>
                        <button class="calc-btn" onclick="appendToCalc('9')">9</button>
                        <button class="calc-btn operator" onclick="appendToCalc('-')">-</button>
                        
                        <button class="calc-btn" onclick="appendToCalc('4')">4</button>
                        <button class="calc-btn" onclick="appendToCalc('5')">5</button>
                        <button class="calc-btn" onclick="appendToCalc('6')">6</button>
                        <button class="calc-btn operator" onclick="appendToCalc('+')">+</button>
                        
                        <button class="calc-btn" onclick="appendToCalc('1')">1</button>
                        <button class="calc-btn" onclick="appendToCalc('2')">2</button>
                        <button class="calc-btn" onclick="appendToCalc('3')">3</button>
                        <button class="calc-btn" onclick="appendToCalc('.')">.</button>
                        
                        <button class="calc-btn" onclick="appendToCalc('0')">0</button>
                        <button class="calc-btn" onclick="appendToCalc('00')">00</button>
                        <button class="calc-btn" onclick="calculateResult()" style="grid-column: span 2;">=</button>
                    </div>
                </div>

                <div class="tool-section">
                    <h3>Unit Converter</h3>
                    <div class="converter-group">
                        <label>Conversion Type</label>
                        <select id="conversionType" onchange="updateConverterOptions()">
                            <option value="length">Length</option>
                            <option value="weight">Weight</option>
                            <option value="temperature">Temperature</option>
                            <option value="volume">Volume</option>
                        </select>
                    </div>
                    <div class="converter-group">
                        <label>From</label>
                        <select id="fromUnit"></select>
                        <input type="number" id="fromValue" placeholder="Enter value">
                    </div>
                    <div class="converter-group">
                        <label>To</label>
                        <select id="toUnit"></select>
                        <input type="number" id="toValue" placeholder="Result" readonly>
                    </div>
                    <button class="btn" onclick="convert()">Convert</button>
                </div>
            </div>
        </section>

        <!-- Translator Section -->
        <section class="content-section" id="translator">
            <div class="section-header">
                <h2>Translator</h2>
                <p>Translate text between different languages to support your language learning.</p>
            </div>

            <div class="card">
                <div class="translator-container">
                    <div>
                        <div class="language-selector">
                            <select id="fromLanguage">
                                <option value="en">English</option>
                                <option value="es">Spanish</option>
                                <option value="fr">French</option>
                                <option value="de">German</option>
                                <option value="zh">Chinese</option>
                                <option value="ja">Japanese</option>
                                <option value="ar">Arabic</option>
                                <option value="hi">Hindi</option>
                            </select>
                            <button class="translate-btn" onclick="swapLanguages()">
                                <i class="fas fa-exchange-alt"></i>
                            </button>
                            <select id="toLanguage">
                                <option value="es">Spanish</option>
                                <option value="en">English</option>
                                <option value="fr">French</option>
                                <option value="de">German</option>
                                <option value="zh">Chinese</option>
                                <option value="ja">Japanese</option>
                                <option value="ar">Arabic</option>
                                <option value="hi">Hindi</option>
                            </select>
                        </div>
                        <textarea class="text-area" id="sourceText" placeholder="Enter text to translate..."></textarea>
                    </div>
                    <div>
                        <div class="language-selector">
                            <div style="width: 100%; text-align: center; color: var(--dark-gray);">Translation</div>
                        </div>
                        <textarea class="text-area" id="translatedText" placeholder="Translation will appear here..." readonly></textarea>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="translateText()">Translate</button>
                </div>
            </div>
        </section>

        <!-- Work Manager Section -->
        <section class="content-section" id="work-manager">
            <div class="section-header">
                <h2>Work Manager</h2>
                <p>Keep track of your assignments, projects, and deadlines in one organized place.</p>
            </div>

            <div class="card">
                <h3>Add New Work</h3>
                <form class="work-form" id="workForm">
                    <div class="form-group">
                        <label for="workTitle">Work Title</label>
                        <input type="text" id="workTitle" required>
                    </div>
                    <div class="form-group">
                        <label for="workSubject">Subject</label>
                        <select id="workSubject">
                            <option value="Math">Math</option>
                            <option value="Science">Science</option>
                            <option value="English">English</option>
                            <option value="History">History</option>
                            <option value="Geography">Geography</option>
                            <option value="Art">Art</option>
                            <option value="Music">Music</option>
                            <option value="Physical Education">Physical Education</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="workType">Type</label>
                        <select id="workType">
                            <option value="Homework">Homework</option>
                            <option value="Project">Project</option>
                            <option value="Exam">Exam</option>
                            <option value="Quiz">Quiz</option>
                            <option value="Essay">Essay</option>
                            <option value="Presentation">Presentation</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="workDeadline">Deadline</label>
                        <input type="date" id="workDeadline" required>
                    </div>
                    <div class="form-group">
                        <label for="questionNumber">Question Number</label>
                        <input type="text" id="questionNumber" placeholder="e.g., 1-10, 5, 7-12">
                    </div>
                    <div class="form-group">
                        <label for="workPriority">Priority</label>
                        <select id="workPriority">
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label for="workDescription">Description</label>
                        <textarea id="workDescription" placeholder="Enter work description..."></textarea>
                    </div>
                    <div class="form-group full-width">
                        <button type="submit" class="btn">Add Work</button>
                    </div>
                </form>
            </div>

            <div class="card">
                <h3>Work List</h3>
                <div class="work-list" id="workList">
                    <!-- Work items will be added here dynamically -->
                </div>
            </div>
        </section>

        <!-- Grade Planner Section -->
        <section class="content-section" id="grade-planner">
            <div class="section-header">
                <h2>Grade Planner</h2>
                <p>Monitor your academic progress and track what you've learned in each subject.</p>
            </div>

            <div class="card">
                <h3>Add Grade</h3>
                <form class="grade-form" id="gradeForm">
                    <div class="form-group">
                        <label for="gradeSubject">Subject</label>
                        <select id="gradeSubject">
                            <option value="Math">Math</option>
                            <option value="Science">Science</option>
                            <option value="English">English</option>
                            <option value="History">History</option>
                            <option value="Geography">Geography</option>
                            <option value="Art">Art</option>
                            <option value="Music">Music</option>
                            <option value="Physical Education">Physical Education</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="gradeScore">Grade (%)</label>
                        <input type="number" id="gradeScore" min="0" max="100" required>
                    </div>
                    <div class="form-group">
                        <label for="gradeTerm">Term</label>
                        <select id="gradeTerm">
                            <option value="Term 1">Term 1</option>
                            <option value="Term 2">Term 2</option>
                            <option value="Term 3">Term 3</option>
                            <option value="Final">Final</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="gradeYear">Year</label>
                        <input type="number" id="gradeYear" min="2020" max="2030" value="2023">
                    </div>
                    <div class="form-group full-width">
                        <button type="submit" class="btn">Add Grade</button>
                    </div>
                </form>
            </div>

            <div class="card">
                <h3>Grades Overview</h3>
                <div id="gradesList">
                    <!-- Grades will be added here dynamically -->
                </div>
            </div>

            <div class="chart-container">
                <h3>Grade Chart</h3>
                <canvas id="gradeChart"></canvas>
            </div>

            <div class="card">
                <h3>Learning Tracker</h3>
                <form id="learningForm">
                    <div class="form-group">
                        <label for="learningSubject">Subject</label>
                        <select id="learningSubject">
                            <option value="Math">Math</option>
                            <option value="Science">Science</option>
                            <option value="English">English</option>
                            <option value="History">History</option>
                            <option value="Geography">Geography</option>
                            <option value="Art">Art</option>
                            <option value="Music">Music</option>
                            <option value="Physical Education">Physical Education</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="learningTopic">Topic</label>
                        <input type="text" id="learningTopic" required>
                    </div>
                    <div class="form-group">
                        <label for="learningDifficulty">Difficulty</label>
                        <select id="learningDifficulty">
                            <option value="easy">Easy</option>
                            <option value="medium">Medium</option>
                            <option value="hard">Hard</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <button type="submit" class="btn">Add Learning Item</button>
                    </div>
                </form>
                <div class="learning-list" id="learningList">
                    <!-- Learning items will be added here dynamically -->
                </div>
            </div>
        </section>
    </main>

    <script>
        // Navigation functionality
        const navItems = document.querySelectorAll('.nav-item');
        const sections = document.querySelectorAll('.content-section');
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');

        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const targetSection = item.getAttribute('data-section');
                
                // Update active nav item
                navItems.forEach(nav => nav.classList.remove('active'));
                item.classList.add('active');
                
                // Show target section
                sections.forEach(section => {
                    section.classList.remove('active');
                    if (section.id === targetSection) {
                        section.classList.add('active');
                    }
                });
                
                // Close sidebar on mobile
                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('active');
                }
            });
        });

        // Mobile menu toggle
        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });

        // Calculator functionality
        let calcDisplay = document.getElementById('calcDisplay');
        let calcValue = '0';
        let shouldResetDisplay = false;

        function updateCalcDisplay() {
            calcDisplay.textContent = calcValue;
        }

        function clearCalc() {
            calcValue = '0';
            updateCalcDisplay();
        }

        function appendToCalc(value) {
            if (shouldResetDisplay) {
                calcValue = '';
                shouldResetDisplay = false;
            }
            
            if (calcValue === '0' && value !== '.') {
                calcValue = value;
            } else {
                calcValue += value;
            }
            
            updateCalcDisplay();
        }

        function deleteLastCalc() {
            if (calcValue.length > 1) {
                calcValue = calcValue.slice(0, -1);
            } else {
                calcValue = '0';
            }
            updateCalcDisplay();
        }

        function calculateResult() {
            try {
                calcValue = String(eval(calcValue));
                shouldResetDisplay = true;
                updateCalcDisplay();
            } catch (error) {
                calcValue = 'Error';
                shouldResetDisplay = true;
                updateCalcDisplay();
            }
        }

        // Converter functionality
        const conversionTypes = {
            length: {
                units: ['meter', 'kilometer', 'centimeter', 'millimeter', 'mile', 'yard', 'foot', 'inch'],
                conversions: {
                    'meter': 1,
                    'kilometer': 0.001,
                    'centimeter': 100,
                    'millimeter': 1000,
                    'mile': 0.000621371,
                    'yard': 1.09361,
                    'foot': 3.28084,
                    'inch': 39.3701
                }
            },
            weight: {
                units: ['kilogram', 'gram', 'milligram', 'pound', 'ounce', 'ton'],
                conversions: {
                    'kilogram': 1,
                    'gram': 1000,
                    'milligram': 1000000,
                    'pound': 2.20462,
                    'ounce': 35.274,
                    'ton': 0.001
                }
            },
            temperature: {
                units: ['celsius', 'fahrenheit', 'kelvin'],
                conversions: {
                    'celsius': (val) => val,
                    'fahrenheit': (val) => (val * 9/5) + 32,
                    'kelvin': (val) => val + 273.15
                }
            },
            volume: {
                units: ['liter', 'milliliter', 'gallon', 'quart', 'pint', 'cup', 'fluid ounce'],
                conversions: {
                    'liter': 1,
                    'milliliter': 1000,
                    'gallon': 0.264172,
                    'quart': 1.05669,
                    'pint': 2.11338,
                    'cup': 4.22675,
                    'fluid ounce': 33.814
                }
            }
        };

        function updateConverterOptions() {
            const type = document.getElementById('conversionType').value;
            const fromUnit = document.getElementById('fromUnit');
            const toUnit = document.getElementById('toUnit');
            
            fromUnit.innerHTML = '';
            toUnit.innerHTML = '';
            
            conversionTypes[type].units.forEach(unit => {
                fromUnit.innerHTML += `<option value="${unit}">${unit}</option>`;
                toUnit.innerHTML += `<option value="${unit}">${unit}</option>`;
            });
            
            // Set different default values for toUnit
            if (toUnit.options.length > 1) {
                toUnit.selectedIndex = 1;
            }
        }

        function convert() {
            const type = document.getElementById('conversionType').value;
            const fromUnit = document.getElementById('fromUnit').value;
            const toUnit = document.getElementById('toUnit').value;
            const fromValue = parseFloat(document.getElementById('fromValue').value);
            const toValue = document.getElementById('toValue');
            
            if (isNaN(fromValue)) {
                toValue.value = 'Invalid input';
                return;
            }
            
            if (type === 'temperature') {
                // First convert to celsius
                let celsiusValue;
                if (fromUnit === 'fahrenheit') {
                    celsiusValue = (fromValue - 32) * 5/9;
                } else if (fromUnit === 'kelvin') {
                    celsiusValue = fromValue - 273.15;
                } else {
                    celsiusValue = fromValue;
                }
                
                // Then convert from celsius to target unit
                let result;
                if (toUnit === 'fahrenheit') {
                    result = (celsiusValue * 9/5) + 32;
                } else if (toUnit === 'kelvin') {
                    result = celsiusValue + 273.15;
                } else {
                    result = celsiusValue;
                }
                
                toValue.value = result.toFixed(2);
            } else {
                // For other types, use the conversion factors
                const fromFactor = conversionTypes[type].conversions[fromUnit];
                const toFactor = conversionTypes[type].conversions[toUnit];
                
                // Convert to base unit first, then to target unit
                const baseValue = fromValue / fromFactor;
                const result = baseValue * toFactor;
                
                toValue.value = result.toFixed(4);
            }
        }

        // Initialize converter options
        updateConverterOptions();

        // Translator functionality
        function translateText() {
            const sourceText = document.getElementById('sourceText').value;
            const fromLanguage = document.getElementById('fromLanguage').value;
            const toLanguage = document.getElementById('toLanguage').value;
            const translatedText = document.getElementById('translatedText');
            
            if (!sourceText.trim()) {
                translatedText.value = 'Please enter text to translate';
                return;
            }
            
            // In a real application, you would use an API like Google Translate
            // For this demo, we'll simulate a translation
            translatedText.value = `Translating from ${getLanguageName(fromLanguage)} to ${getLanguageName(toLanguage)}:\n\n"${sourceText}"`;
            
            // Add a simple animation to show it's "working"
            translatedText.value = 'Translating...';
            setTimeout(() => {
                translatedText.value = `[Simulated Translation]\n\n"${sourceText}"`;
            }, 1000);
        }

        function getLanguageName(code) {
            const languages = {
                'en': 'English',
                'es': 'Spanish',
                'fr': 'French',
                'de': 'German',
                'zh': 'Chinese',
                'ja': 'Japanese',
                'ar': 'Arabic',
                'hi': 'Hindi'
            };
            return languages[code] || code;
        }

        function swapLanguages() {
            const fromLanguage = document.getElementById('fromLanguage');
            const toLanguage = document.getElementById('toLanguage');
            const sourceText = document.getElementById('sourceText');
            const translatedText = document.getElementById('translatedText');
            
            // Swap language selections
            const temp = fromLanguage.value;
            fromLanguage.value = toLanguage.value;
            toLanguage.value = temp;
            
            // Swap text content
            const tempText = sourceText.value;
            sourceText.value = translatedText.value;
            translatedText.value = tempText;
        }

        // Work Manager functionality
        const workForm = document.getElementById('workForm');
        const workList = document.getElementById('workList');
        let workItems = JSON.parse(localStorage.getItem('workItems')) || [];

        workForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const workItem = {
                id: Date.now(),
                title: document.getElementById('workTitle').value,
                subject: document.getElementById('workSubject').value,
                type: document.getElementById('workType').value,
                deadline: document.getElementById('workDeadline').value,
                questionNumber: document.getElementById('questionNumber').value,
                priority: document.getElementById('workPriority').value,
                description: document.getElementById('workDescription').value,
                completed: false
            };
            
            workItems.push(workItem);
            saveWorkItems();
            renderWorkItems();
            workForm.reset();
        });

        function saveWorkItems() {
            localStorage.setItem('workItems', JSON.stringify(workItems));
        }

        function renderWorkItems() {
            workList.innerHTML = '';
            
            // Sort by deadline
            workItems.sort((a, b) => new Date(a.deadline) - new Date(b.deadline));
            
            workItems.forEach(item => {
                const workItemEl = document.createElement('div');
                workItemEl.className = 'work-item';
                
                // Calculate days until deadline
                const today = new Date();
                const deadline = new Date(item.deadline);
                const daysUntil = Math.ceil((deadline - today) / (1000 * 60 * 60 * 24));
                let deadlineText = '';
                let deadlineClass = '';
                
                if (daysUntil < 0) {
                    deadlineText = `${Math.abs(daysUntil)} days overdue`;
                    deadlineClass = 'style="background-color: #f44336;"';
                } else if (daysUntil === 0) {
                    deadlineText = 'Due today';
                    deadlineClass = 'style="background-color: #ff9800;"';
                } else if (daysUntil === 1) {
                    deadlineText = 'Due tomorrow';
                    deadlineClass = 'style="background-color: #ff9800;"';
                } else if (daysUntil <= 7) {
                    deadlineText = `${daysUntil} days`;
                    deadlineClass = 'style="background-color: #ff9800;"';
                } else {
                    deadlineText = `${daysUntil} days`;
                    deadlineClass = '';
                }
                
                workItemEl.innerHTML = `
                    <div class="work-item-content">
                        <div class="work-item-title">${item.title}</div>
                        <div class="work-item-details">
                            ${item.subject} | ${item.type} 
                            ${item.questionNumber ? `| Questions: ${item.questionNumber}` : ''}
                            ${item.description ? `| ${item.description}` : ''}
                        </div>
                    </div>
                    <div class="work-item-deadline" ${deadlineClass}>${deadlineText}</div>
                    <button class="delete-btn" onclick="deleteWorkItem(${item.id})">Delete</button>
                `;
                
                workList.appendChild(workItemEl);
            });
            
            if (workItems.length === 0) {
                workList.innerHTML = '<p>No work items yet. Add your first assignment above!</p>';
            }
        }

        function deleteWorkItem(id) {
            workItems = workItems.filter(item => item.id !== id);
            saveWorkItems();
            renderWorkItems();
        }

        // Initialize work items
        renderWorkItems();

        // Grade Planner functionality
        const gradeForm = document.getElementById('gradeForm');
        const gradesList = document.getElementById('gradesList');
        let grades = JSON.parse(localStorage.getItem('grades')) || [];
        let gradeChart = null;

        gradeForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const grade = {
                id: Date.now(),
                subject: document.getElementById('gradeSubject').value,
                score: parseFloat(document.getElementById('gradeScore').value),
                term: document.getElementById('gradeTerm').value,
                year: parseInt(document.getElementById('gradeYear').value)
            };
            
            grades.push(grade);
            saveGrades();
            renderGrades();
            updateGradeChart();
            gradeForm.reset();
        });

        function saveGrades() {
            localStorage.setItem('grades', JSON.stringify(grades));
        }

        function renderGrades() {
            gradesList.innerHTML = '';
            
            // Group grades by subject
            const gradesBySubject = {};
            grades.forEach(grade => {
                if (!gradesBySubject[grade.subject]) {
                    gradesBySubject[grade.subject] = [];
                }
                gradesBySubject[grade.subject].push(grade);
            });
            
            // Calculate average for each subject
            for (const subject in gradesBySubject) {
                const subjectGrades = gradesBySubject[subject];
                const average = subjectGrades.reduce((sum, grade) => sum + grade.score, 0) / subjectGrades.length;
                
                const gradeItem = document.createElement('div');
                gradeItem.className = 'grade-item';
                gradeItem.innerHTML = `
                    <div class="grade-item-subject">${subject}</div>
                    <div class="grade-item-score">${average.toFixed(1)}%</div>
                `;
                
                gradesList.appendChild(gradeItem);
            }
            
            if (Object.keys(gradesBySubject).length === 0) {
                gradesList.innerHTML = '<p>No grades added yet. Add your first grade above!</p>';
            }
        }

        function updateGradeChart() {
            const ctx = document.getElementById('gradeChart').getContext('2d');
            
            // Group grades by subject
            const gradesBySubject = {};
            grades.forEach(grade => {
                if (!gradesBySubject[grade.subject]) {
                    gradesBySubject[grade.subject] = [];
                }
                gradesBySubject[grade.subject].push(grade);
            });
            
            // Prepare data for chart
            const labels = Object.keys(gradesBySubject);
            const data = labels.map(subject => {
                const subjectGrades = gradesBySubject[subject];
                return subjectGrades.reduce((sum, grade) => sum + grade.score, 0) / subjectGrades.length;
            });
            
            // Destroy existing chart if it exists
            if (gradeChart) {
                gradeChart.destroy();
            }
            
            // Create new chart
            gradeChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Average Grade (%)',
                        data: data,
                        backgroundColor: 'rgba(76, 175, 80, 0.6)',
                        borderColor: 'rgba(46, 125, 50, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    },
                    responsive: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });
        }

        // Learning Tracker functionality
        const learningForm = document.getElementById('learningForm');
        const learningList = document.getElementById('learningList');
        let learningItems = JSON.parse(localStorage.getItem('learningItems')) || [];

        learningForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const learningItem = {
                id: Date.now(),
                subject: document.getElementById('learningSubject').value,
                topic: document.getElementById('learningTopic').value,
                difficulty: document.getElementById('learningDifficulty').value,
                date: new Date().toLocaleDateString()
            };
            
            learningItems.push(learningItem);
            saveLearningItems();
            renderLearningItems();
            learningForm.reset();
        });

        function saveLearningItems() {
            localStorage.setItem('learningItems', JSON.stringify(learningItems));
        }

        function renderLearningItems() {
            learningList.innerHTML = '';
            
            // Sort by date (newest first)
            learningItems.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            learningItems.forEach(item => {
                const learningItemEl = document.createElement('div');
                learningItemEl.className = 'learning-item';
                
                learningItemEl.innerHTML = `
                    <div class="learning-item-header">
                        <div class="learning-item-title">${item.topic}</div>
                        <span class="difficulty-badge difficulty-${item.difficulty}">${item.difficulty}</span>
                    </div>
                    <div>${item.subject} - ${item.date}</div>
                `;
                
                learningList.appendChild(learningItemEl);
            });
            
            if (learningItems.length === 0) {
                learningList.innerHTML = '<p>No learning items yet. Add your first learning item above!</p>';
            }
        }

        // Initialize learning items
        renderLearningItems();

        // Initialize grades
        renderGrades();
        updateGradeChart();
        if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./sw.js')
      .then(reg => console.log('Epsilon SW registered!'))
      .catch(err => console.log('SW registration failed: ', err));
  });
}
    </script>
</body>
</html>
